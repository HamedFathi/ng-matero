!function(){function n(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function e(n,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function s(n,s,i){return s&&e(n.prototype,s),i&&e(n,i),n}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{xUSb:function(e,i,t){"use strict";t.r(i),t.d(i,"PermissionsModule",function(){return D});var o,c,r=t("PCNd"),a=t("tyNb"),u=t("XNiG"),l=t("1G5W"),m=t("fXoL"),p=t("qSrz"),h=t("tgey"),b=t("jaxi"),d=t("3Pt+"),g=t("ofXK"),f=((c=function(){function e(s,i){n(this,e),this.rolesSrv=s,this.permissionsSrv=i,this.permissionsOfRole={ADMIN:["canAdd","canDelete","canEdit","canRead"],MANAGER:["canAdd","canEdit","canRead"],GUEST:["canRead"]},this._destroy$=new u.a}return s(e,[{key:"ngOnInit",value:function(){this.currentRole=Object.keys(this.rolesSrv.getRoles())[0],this.currentPermissions=Object.keys(this.permissionsSrv.getPermissions()),this.rolesSrv.roles$.pipe(Object(l.a)(this._destroy$)).subscribe(function(n){console.log(n)}),this.permissionsSrv.permissions$.pipe(Object(l.a)(this._destroy$)).subscribe(function(n){console.log(n)})}},{key:"ngOnDestroy",value:function(){this._destroy$.next(),this._destroy$.complete()}},{key:"onPermissionChange",value:function(){this.currentPermissions=this.permissionsOfRole[this.currentRole],this.rolesSrv.flushRolesAndPermissions(),this.rolesSrv.addRoleWithPermissions(this.currentRole,this.currentPermissions)}}]),e}()).\u0275fac=function(n){return new(n||c)(m.Ub(p.e),m.Ub(p.d))},c.\u0275cmp=m.Ob({type:c,selectors:[["app-permissions-role-switching"]],decls:24,vars:7,consts:[["href","https://github.com/AlexKhymenko/ngx-permissions","target","_blank"],[3,"ngModel","ngModelChange","change"],["value","ADMIN"],["value","MANAGER"],["value","GUEST"]],template:function(n,e){1&n&&(m.Vb(0,"page-header"),m.ac(1,"p"),m.Uc(2," The permission managements are powered by "),m.ac(3,"a",0),m.ac(4,"code"),m.Uc(5,"ngx-permissions"),m.Zb(),m.Zb(),m.Uc(6,".\n"),m.Zb(),m.ac(7,"mat-button-toggle-group",1),m.ic("ngModelChange",function(n){return e.currentRole=n})("change",function(){return e.onPermissionChange()}),m.ac(8,"mat-button-toggle",2),m.Uc(9,"ADMIN"),m.Zb(),m.ac(10,"mat-button-toggle",3),m.Uc(11,"MANAGER"),m.Zb(),m.ac(12,"mat-button-toggle",4),m.Uc(13,"GUEST"),m.Zb(),m.Zb(),m.ac(14,"p"),m.Uc(15," Your current role: "),m.ac(16,"code"),m.Uc(17),m.nc(18,"json"),m.Zb(),m.Zb(),m.ac(19,"p"),m.Uc(20," Your current permissions: "),m.ac(21,"code"),m.Uc(22),m.nc(23,"json"),m.Zb(),m.Zb()),2&n&&(m.Hb(7),m.vc("ngModel",e.currentRole),m.Hb(10),m.Vc(m.oc(18,3,e.currentRole)),m.Hb(5),m.Vc(m.oc(23,5,e.currentPermissions)))},directives:[h.a,b.b,d.r,d.u,b.a],pipes:[g.i],styles:[""]}),c),v=((o=function(){function e(s,i,t){n(this,e),this.rolesSrv=s,this.permissionsSrv=i,this.router=t,this.permissionsOfRole={ADMIN:["canAdd","canDelete","canEdit","canRead"],MANAGER:["canAdd","canEdit","canRead"],GUEST:["canRead"]}}return s(e,[{key:"ngOnInit",value:function(){this.currentRole=Object.keys(this.rolesSrv.getRoles())[0],this.currentPermissions=Object.keys(this.permissionsSrv.getPermissions())}},{key:"onPermissionChange",value:function(){this.currentPermissions=this.permissionsOfRole[this.currentRole],this.rolesSrv.flushRolesAndPermissions(),this.rolesSrv.addRoleWithPermissions(this.currentRole,this.currentPermissions),this.router.navigateByUrl("/dashboard")}}]),e}()).\u0275fac=function(n){return new(n||o)(m.Ub(p.e),m.Ub(p.d),m.Ub(a.e))},o.\u0275cmp=m.Ob({type:o,selectors:[["app-permissions-route-guard"]],decls:20,vars:7,consts:[[3,"ngModel","ngModelChange","change"],["value","ADMIN"],["value","MANAGER"],["value","GUEST"]],template:function(n,e){1&n&&(m.Vb(0,"page-header"),m.ac(1,"p"),m.Uc(2," The route will be redirected to dashboard after change permission.\n"),m.Zb(),m.ac(3,"mat-button-toggle-group",0),m.ic("ngModelChange",function(n){return e.currentRole=n})("change",function(){return e.onPermissionChange()}),m.ac(4,"mat-button-toggle",1),m.Uc(5,"ADMIN"),m.Zb(),m.ac(6,"mat-button-toggle",2),m.Uc(7,"MANAGER"),m.Zb(),m.ac(8,"mat-button-toggle",3),m.Uc(9,"GUEST"),m.Zb(),m.Zb(),m.ac(10,"p"),m.Uc(11," Your current role: "),m.ac(12,"code"),m.Uc(13),m.nc(14,"json"),m.Zb(),m.Zb(),m.ac(15,"p"),m.Uc(16," Your current permissions: "),m.ac(17,"code"),m.Uc(18),m.nc(19,"json"),m.Zb(),m.Zb()),2&n&&(m.Hb(3),m.vc("ngModel",e.currentRole),m.Hb(10),m.Vc(m.oc(14,3,e.currentRole)),m.Hb(5),m.Vc(m.oc(19,5,e.currentPermissions)))},directives:[h.a,b.b,d.r,d.u,b.a],pipes:[g.i],styles:[""]}),o),y=t("6Nlu");function P(n,e){1&n&&(m.ac(0,"mtx-alert",10),m.Uc(1," I should see it only admin "),m.Zb())}function U(n,e){1&n&&(m.ac(0,"mtx-alert",11),m.Uc(1," Usage on both only and except I should see see it only admin "),m.Zb())}function x(n,e){1&n&&(m.ac(0,"p"),m.Uc(1,"I will see it only guest"),m.Zb())}function A(n,e){1&n&&(m.ac(0,"p"),m.Uc(1,"I will see it except adminnnnn"),m.Zb())}function S(n,e){1&n&&(m.ac(0,"p"),m.Uc(1,"I should see it except admin"),m.Zb())}function Z(n,e){1&n&&(m.ac(0,"div"),m.Uc(1," Testing template\n"),m.Zb())}function R(n,e){1&n&&(m.ac(0,"div"),m.Uc(1," Testing template\n"),m.Zb())}function E(n,e){1&n&&(m.ac(0,"p"),m.Uc(1,"else block"),m.Zb())}function O(n,e){1&n&&(m.ac(0,"p"),m.Uc(1,"then block"),m.Zb())}function T(n,e){1&n&&(m.ac(0,"button"),m.Uc(1,"This should be visible to admin or superadmin"),m.Zb())}function k(n,e){1&n&&(m.ac(0,"button"),m.Uc(1,"WTF"),m.Zb())}var w,M,G,N=function(){return["admin"]},H=function(){return["guest"]},I=function(){return["adminnnnn"]},j=function(){return[]},C=[{path:"role-switching",component:f},{path:"route-guard",component:v,canActivate:[p.b],data:{permissions:{except:"GUEST",redirectTo:"/dashboard"}}},{path:"test",component:(w=function(){function e(s){n(this,e),this.permissionsSrv=s,this.permission=["guest"]}return s(e,[{key:"ngOnInit",value:function(){}},{key:"addPermission",value:function(){this.permissionsSrv.addPermission("admin",function(){return new Promise(function(n,e){setTimeout(function(){return n(!0)},2e3)})})}},{key:"removePermission",value:function(){this.permissionsSrv.removePermission("admin")}},{key:"unAuthorized",value:function(){console.log("unAuthorized")}},{key:"authorized",value:function(){console.log("authorizes")}},{key:"changeToAdmin",value:function(){this.permission=["admin"],console.log(this.permission)}},{key:"changeToAnotherPermission",value:function(){this.permission=["AWESOME"],console.log(this.permission)}},{key:"changeToGuest",value:function(){this.permission=["guest"],console.log(this.permission)}}]),e}(),w.\u0275fac=function(n){return new(n||w)(m.Ub(p.d))},w.\u0275cmp=m.Ob({type:w,selectors:[["app-permissions-test"]],decls:27,vars:22,consts:[[3,"click"],["permissions","",3,"ngxPermissionsOnly"],[3,"ngxPermissionsOnly","ngxPermissionsExcept"],["permissions","",3,"ngxPermissionsExcept","permissionsAuthorized","permissionsUnauthorized"],["permissions","",3,"ngxPermissionsExcept"],[4,"ngxPermissionsOnly","ngxPermissionsOnlyElse","ngxPermissionsOnlyThen"],[4,"ngxPermissionsExcept","ngxPermissionsExceptElse","ngxPermissionsExceptThen"],["a",""],["b",""],[4,"ngxPermissionsOnly"],["type","success"],["type","warning"]],template:function(n,e){if(1&n&&(m.Vb(0,"page-header"),m.ac(1,"p"),m.ac(2,"button",0),m.ic("click",function(){return e.addPermission()}),m.Uc(3,"Add Permission [ admin ]"),m.Zb(),m.ac(4,"button",0),m.ic("click",function(){return e.removePermission()}),m.Uc(5,"Remove Permission [ admin ]"),m.Zb(),m.Zb(),m.Sc(6,P,2,0,"ng-template",1),m.Sc(7,U,2,0,"ng-template",2),m.Sc(8,x,2,0,"ng-template",1),m.Sc(9,A,2,0,"ng-template",3),m.ic("permissionsAuthorized",function(){return e.authorized()})("permissionsUnauthorized",function(){return e.unAuthorized()}),m.Sc(10,S,2,0,"ng-template",4),m.Sc(11,Z,2,0,"div",5),m.Sc(12,R,2,0,"div",6),m.Sc(13,E,2,0,"ng-template",null,7,m.Tc),m.Sc(15,O,2,0,"ng-template",null,8,m.Tc),m.ac(17,"div"),m.ac(18,"button",0),m.ic("click",function(){return e.changeToAdmin()}),m.Uc(19,"Change To Admin Permission"),m.Zb(),m.ac(20,"button",0),m.ic("click",function(){return e.changeToAnotherPermission()}),m.Uc(21,"Change To Awesome Permission"),m.Zb(),m.ac(22,"button",0),m.ic("click",function(){return e.changeToGuest()}),m.Uc(23,"Change To Guest Permission"),m.Zb(),m.Zb(),m.ac(24,"div"),m.Sc(25,T,2,0,"button",9),m.Sc(26,k,2,0,"button",9),m.Zb()),2&n){var s=m.Gc(14),i=m.Gc(16);m.Hb(6),m.vc("ngxPermissionsOnly",m.yc(14,N)),m.Hb(1),m.vc("ngxPermissionsOnly",m.yc(15,N))("ngxPermissionsExcept","hhhhh"),m.Hb(1),m.vc("ngxPermissionsOnly",m.yc(16,H)),m.Hb(1),m.vc("ngxPermissionsExcept",m.yc(17,I)),m.Hb(1),m.vc("ngxPermissionsExcept",m.yc(18,N)),m.Hb(1),m.vc("ngxPermissionsOnly",m.yc(19,N))("ngxPermissionsOnlyElse",s)("ngxPermissionsOnlyThen",i),m.Hb(1),m.vc("ngxPermissionsExcept",m.yc(20,N))("ngxPermissionsExceptElse",s)("ngxPermissionsExceptThen",i),m.Hb(13),m.vc("ngxPermissionsOnly",e.permission),m.Hb(1),m.vc("ngxPermissionsOnly",m.yc(21,j))}},directives:[h.a,p.a,y.a],styles:[""]}),w),canActivate:[p.b],data:{permissions:{only:"ADMIN",redirectTo:"/dashboard"}}}],z=((G=function e(){n(this,e)}).\u0275fac=function(n){return new(n||G)},G.\u0275mod=m.Sb({type:G}),G.\u0275inj=m.Rb({imports:[[a.i.forChild(C)],a.i]}),G),D=((M=function e(){n(this,e)}).\u0275fac=function(n){return new(n||M)},M.\u0275mod=m.Sb({type:M}),M.\u0275inj=m.Rb({imports:[[r.a,z]]}),M)}}])}();