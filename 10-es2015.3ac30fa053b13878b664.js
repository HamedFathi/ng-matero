(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{xUSb:function(e,n,s){"use strict";s.r(n),s.d(n,"PermissionsModule",function(){return N});var i=s("PCNd"),t=s("tyNb"),o=s("XNiG"),c=s("1G5W"),r=s("fXoL"),a=s("qSrz"),u=s("tgey"),l=s("jaxi"),m=s("3Pt+"),p=s("ofXK");let d=(()=>{class e{constructor(e,n){this.rolesSrv=e,this.permissionsSrv=n,this.permissionsOfRole={ADMIN:["canAdd","canDelete","canEdit","canRead"],MANAGER:["canAdd","canEdit","canRead"],GUEST:["canRead"]},this._destroy$=new o.a}ngOnInit(){this.currentRole=Object.keys(this.rolesSrv.getRoles())[0],this.currentPermissions=Object.keys(this.permissionsSrv.getPermissions()),this.rolesSrv.roles$.pipe(Object(c.a)(this._destroy$)).subscribe(e=>{console.log(e)}),this.permissionsSrv.permissions$.pipe(Object(c.a)(this._destroy$)).subscribe(e=>{console.log(e)})}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}onPermissionChange(){this.currentPermissions=this.permissionsOfRole[this.currentRole],this.rolesSrv.flushRolesAndPermissions(),this.rolesSrv.addRoleWithPermissions(this.currentRole,this.currentPermissions)}}return e.\u0275fac=function(n){return new(n||e)(r.Ub(a.e),r.Ub(a.d))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-permissions-role-switching"]],decls:24,vars:7,consts:[["href","https://github.com/AlexKhymenko/ngx-permissions","target","_blank"],[3,"ngModel","ngModelChange","change"],["value","ADMIN"],["value","MANAGER"],["value","GUEST"]],template:function(e,n){1&e&&(r.Vb(0,"page-header"),r.ac(1,"p"),r.Uc(2," The permission managements are powered by "),r.ac(3,"a",0),r.ac(4,"code"),r.Uc(5,"ngx-permissions"),r.Zb(),r.Zb(),r.Uc(6,".\n"),r.Zb(),r.ac(7,"mat-button-toggle-group",1),r.ic("ngModelChange",function(e){return n.currentRole=e})("change",function(){return n.onPermissionChange()}),r.ac(8,"mat-button-toggle",2),r.Uc(9,"ADMIN"),r.Zb(),r.ac(10,"mat-button-toggle",3),r.Uc(11,"MANAGER"),r.Zb(),r.ac(12,"mat-button-toggle",4),r.Uc(13,"GUEST"),r.Zb(),r.Zb(),r.ac(14,"p"),r.Uc(15," Your current role: "),r.ac(16,"code"),r.Uc(17),r.nc(18,"json"),r.Zb(),r.Zb(),r.ac(19,"p"),r.Uc(20," Your current permissions: "),r.ac(21,"code"),r.Uc(22),r.nc(23,"json"),r.Zb(),r.Zb()),2&e&&(r.Hb(7),r.vc("ngModel",n.currentRole),r.Hb(10),r.Vc(r.oc(18,3,n.currentRole)),r.Hb(5),r.Vc(r.oc(23,5,n.currentPermissions)))},directives:[u.a,l.b,m.r,m.u,l.a],pipes:[p.i],styles:[""]}),e})(),h=(()=>{class e{constructor(e,n,s){this.rolesSrv=e,this.permissionsSrv=n,this.router=s,this.permissionsOfRole={ADMIN:["canAdd","canDelete","canEdit","canRead"],MANAGER:["canAdd","canEdit","canRead"],GUEST:["canRead"]}}ngOnInit(){this.currentRole=Object.keys(this.rolesSrv.getRoles())[0],this.currentPermissions=Object.keys(this.permissionsSrv.getPermissions())}onPermissionChange(){this.currentPermissions=this.permissionsOfRole[this.currentRole],this.rolesSrv.flushRolesAndPermissions(),this.rolesSrv.addRoleWithPermissions(this.currentRole,this.currentPermissions),this.router.navigateByUrl("/dashboard")}}return e.\u0275fac=function(n){return new(n||e)(r.Ub(a.e),r.Ub(a.d),r.Ub(t.e))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-permissions-route-guard"]],decls:20,vars:7,consts:[[3,"ngModel","ngModelChange","change"],["value","ADMIN"],["value","MANAGER"],["value","GUEST"]],template:function(e,n){1&e&&(r.Vb(0,"page-header"),r.ac(1,"p"),r.Uc(2," The route will be redirected to dashboard after change permission.\n"),r.Zb(),r.ac(3,"mat-button-toggle-group",0),r.ic("ngModelChange",function(e){return n.currentRole=e})("change",function(){return n.onPermissionChange()}),r.ac(4,"mat-button-toggle",1),r.Uc(5,"ADMIN"),r.Zb(),r.ac(6,"mat-button-toggle",2),r.Uc(7,"MANAGER"),r.Zb(),r.ac(8,"mat-button-toggle",3),r.Uc(9,"GUEST"),r.Zb(),r.Zb(),r.ac(10,"p"),r.Uc(11," Your current role: "),r.ac(12,"code"),r.Uc(13),r.nc(14,"json"),r.Zb(),r.Zb(),r.ac(15,"p"),r.Uc(16," Your current permissions: "),r.ac(17,"code"),r.Uc(18),r.nc(19,"json"),r.Zb(),r.Zb()),2&e&&(r.Hb(3),r.vc("ngModel",n.currentRole),r.Hb(10),r.Vc(r.oc(14,3,n.currentRole)),r.Hb(5),r.Vc(r.oc(19,5,n.currentPermissions)))},directives:[u.a,l.b,m.r,m.u,l.a],pipes:[p.i],styles:[""]}),e})();var b=s("6Nlu");function g(e,n){1&e&&(r.ac(0,"mtx-alert",10),r.Uc(1," I should see it only admin "),r.Zb())}function P(e,n){1&e&&(r.ac(0,"mtx-alert",11),r.Uc(1," Usage on both only and except I should see see it only admin "),r.Zb())}function v(e,n){1&e&&(r.ac(0,"p"),r.Uc(1,"I will see it only guest"),r.Zb())}function f(e,n){1&e&&(r.ac(0,"p"),r.Uc(1,"I will see it except adminnnnn"),r.Zb())}function y(e,n){1&e&&(r.ac(0,"p"),r.Uc(1,"I should see it except admin"),r.Zb())}function U(e,n){1&e&&(r.ac(0,"div"),r.Uc(1," Testing template\n"),r.Zb())}function x(e,n){1&e&&(r.ac(0,"div"),r.Uc(1," Testing template\n"),r.Zb())}function A(e,n){1&e&&(r.ac(0,"p"),r.Uc(1,"else block"),r.Zb())}function S(e,n){1&e&&(r.ac(0,"p"),r.Uc(1,"then block"),r.Zb())}function Z(e,n){1&e&&(r.ac(0,"button"),r.Uc(1,"This should be visible to admin or superadmin"),r.Zb())}function R(e,n){1&e&&(r.ac(0,"button"),r.Uc(1,"WTF"),r.Zb())}const E=function(){return["admin"]},O=function(){return["guest"]},T=function(){return["adminnnnn"]},M=function(){return[]},w=[{path:"role-switching",component:d},{path:"route-guard",component:h,canActivate:[a.b],data:{permissions:{except:"GUEST",redirectTo:"/dashboard"}}},{path:"test",component:(()=>{class e{constructor(e){this.permissionsSrv=e,this.permission=["guest"]}ngOnInit(){}addPermission(){this.permissionsSrv.addPermission("admin",()=>new Promise((e,n)=>{setTimeout(()=>e(!0),2e3)}))}removePermission(){this.permissionsSrv.removePermission("admin")}unAuthorized(){console.log("unAuthorized")}authorized(){console.log("authorizes")}changeToAdmin(){this.permission=["admin"],console.log(this.permission)}changeToAnotherPermission(){this.permission=["AWESOME"],console.log(this.permission)}changeToGuest(){this.permission=["guest"],console.log(this.permission)}}return e.\u0275fac=function(n){return new(n||e)(r.Ub(a.d))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-permissions-test"]],decls:27,vars:22,consts:[[3,"click"],["permissions","",3,"ngxPermissionsOnly"],[3,"ngxPermissionsOnly","ngxPermissionsExcept"],["permissions","",3,"ngxPermissionsExcept","permissionsAuthorized","permissionsUnauthorized"],["permissions","",3,"ngxPermissionsExcept"],[4,"ngxPermissionsOnly","ngxPermissionsOnlyElse","ngxPermissionsOnlyThen"],[4,"ngxPermissionsExcept","ngxPermissionsExceptElse","ngxPermissionsExceptThen"],["a",""],["b",""],[4,"ngxPermissionsOnly"],["type","success"],["type","warning"]],template:function(e,n){if(1&e&&(r.Vb(0,"page-header"),r.ac(1,"p"),r.ac(2,"button",0),r.ic("click",function(){return n.addPermission()}),r.Uc(3,"Add Permission [ admin ]"),r.Zb(),r.ac(4,"button",0),r.ic("click",function(){return n.removePermission()}),r.Uc(5,"Remove Permission [ admin ]"),r.Zb(),r.Zb(),r.Sc(6,g,2,0,"ng-template",1),r.Sc(7,P,2,0,"ng-template",2),r.Sc(8,v,2,0,"ng-template",1),r.Sc(9,f,2,0,"ng-template",3),r.ic("permissionsAuthorized",function(){return n.authorized()})("permissionsUnauthorized",function(){return n.unAuthorized()}),r.Sc(10,y,2,0,"ng-template",4),r.Sc(11,U,2,0,"div",5),r.Sc(12,x,2,0,"div",6),r.Sc(13,A,2,0,"ng-template",null,7,r.Tc),r.Sc(15,S,2,0,"ng-template",null,8,r.Tc),r.ac(17,"div"),r.ac(18,"button",0),r.ic("click",function(){return n.changeToAdmin()}),r.Uc(19,"Change To Admin Permission"),r.Zb(),r.ac(20,"button",0),r.ic("click",function(){return n.changeToAnotherPermission()}),r.Uc(21,"Change To Awesome Permission"),r.Zb(),r.ac(22,"button",0),r.ic("click",function(){return n.changeToGuest()}),r.Uc(23,"Change To Guest Permission"),r.Zb(),r.Zb(),r.ac(24,"div"),r.Sc(25,Z,2,0,"button",9),r.Sc(26,R,2,0,"button",9),r.Zb()),2&e){const e=r.Gc(14),s=r.Gc(16);r.Hb(6),r.vc("ngxPermissionsOnly",r.yc(14,E)),r.Hb(1),r.vc("ngxPermissionsOnly",r.yc(15,E))("ngxPermissionsExcept","hhhhh"),r.Hb(1),r.vc("ngxPermissionsOnly",r.yc(16,O)),r.Hb(1),r.vc("ngxPermissionsExcept",r.yc(17,T)),r.Hb(1),r.vc("ngxPermissionsExcept",r.yc(18,E)),r.Hb(1),r.vc("ngxPermissionsOnly",r.yc(19,E))("ngxPermissionsOnlyElse",e)("ngxPermissionsOnlyThen",s),r.Hb(1),r.vc("ngxPermissionsExcept",r.yc(20,E))("ngxPermissionsExceptElse",e)("ngxPermissionsExceptThen",s),r.Hb(13),r.vc("ngxPermissionsOnly",n.permission),r.Hb(1),r.vc("ngxPermissionsOnly",r.yc(21,M))}},directives:[u.a,a.a,b.a],styles:[""]}),e})(),canActivate:[a.b],data:{permissions:{only:"ADMIN",redirectTo:"/dashboard"}}}];let G=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=r.Sb({type:e}),e.\u0275inj=r.Rb({imports:[[t.i.forChild(w)],t.i]}),e})(),N=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=r.Sb({type:e}),e.\u0275inj=r.Rb({imports:[[i.a,G]]}),e})()}}]);