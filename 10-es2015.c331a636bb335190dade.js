(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{xUSb:function(e,s,n){"use strict";n.r(s),n.d(s,"PermissionsModule",function(){return k});var i=n("PCNd"),t=n("tyNb"),o=n("XNiG"),r=n("1G5W"),c=n("fXoL"),a=n("qSrz"),m=n("tgey"),u=n("jaxi"),l=n("3Pt+"),p=n("ofXK");let d=(()=>{class e{constructor(e,s){this.rolesSrv=e,this.permissionsSrv=s,this.permissionsOfRole={ADMIN:["canAdd","canDelete","canEdit","canRead"],MANAGER:["canAdd","canEdit","canRead"],GUEST:["canRead"]},this._destroy$=new o.a}ngOnInit(){this.currentRole=Object.keys(this.rolesSrv.getRoles())[0],this.currentPermissions=Object.keys(this.permissionsSrv.getPermissions()),this.rolesSrv.roles$.pipe(Object(r.a)(this._destroy$)).subscribe(e=>{console.log(e)}),this.permissionsSrv.permissions$.pipe(Object(r.a)(this._destroy$)).subscribe(e=>{console.log(e)})}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}onPermissionChange(){this.currentPermissions=this.permissionsOfRole[this.currentRole],this.rolesSrv.flushRolesAndPermissions(),this.rolesSrv.addRoleWithPermissions(this.currentRole,this.currentPermissions)}}return e.\u0275fac=function(s){return new(s||e)(c.Ub(a.e),c.Ub(a.d))},e.\u0275cmp=c.Ob({type:e,selectors:[["app-permissions-role-switching"]],decls:24,vars:7,consts:[["href","https://github.com/AlexKhymenko/ngx-permissions","target","_blank"],[3,"ngModel","ngModelChange","change"],["value","ADMIN"],["value","MANAGER"],["value","GUEST"]],template:function(e,s){1&e&&(c.Vb(0,"page-header"),c.ac(1,"p"),c.Uc(2," The permissions management is powered by "),c.ac(3,"a",0),c.ac(4,"code"),c.Uc(5,"ngx-permissions"),c.Zb(),c.Zb(),c.Uc(6,".\n"),c.Zb(),c.ac(7,"mat-button-toggle-group",1),c.ic("ngModelChange",function(e){return s.currentRole=e})("change",function(){return s.onPermissionChange()}),c.ac(8,"mat-button-toggle",2),c.Uc(9,"ADMIN"),c.Zb(),c.ac(10,"mat-button-toggle",3),c.Uc(11,"MANAGER"),c.Zb(),c.ac(12,"mat-button-toggle",4),c.Uc(13,"GUEST"),c.Zb(),c.Zb(),c.ac(14,"p"),c.Uc(15," Your current role: "),c.ac(16,"code"),c.Uc(17),c.nc(18,"json"),c.Zb(),c.Zb(),c.ac(19,"p"),c.Uc(20," Your current permissions: "),c.ac(21,"code"),c.Uc(22),c.nc(23,"json"),c.Zb(),c.Zb()),2&e&&(c.Hb(7),c.vc("ngModel",s.currentRole),c.Hb(10),c.Vc(c.oc(18,3,s.currentRole)),c.Hb(5),c.Vc(c.oc(23,5,s.currentPermissions)))},directives:[m.a,u.b,l.r,l.u,u.a],pipes:[p.i],styles:[""]}),e})(),g=(()=>{class e{constructor(e,s,n){this.rolesSrv=e,this.permissionsSrv=s,this.router=n,this.permissionsOfRole={ADMIN:["canAdd","canDelete","canEdit","canRead"],MANAGER:["canAdd","canEdit","canRead"],GUEST:["canRead"]}}ngOnInit(){this.currentRole=Object.keys(this.rolesSrv.getRoles())[0],this.currentPermissions=Object.keys(this.permissionsSrv.getPermissions())}onPermissionChange(){this.currentPermissions=this.permissionsOfRole[this.currentRole],this.rolesSrv.flushRolesAndPermissions(),this.rolesSrv.addRoleWithPermissions(this.currentRole,this.currentPermissions),this.router.navigateByUrl("/dashboard")}}return e.\u0275fac=function(s){return new(s||e)(c.Ub(a.e),c.Ub(a.d),c.Ub(t.e))},e.\u0275cmp=c.Ob({type:e,selectors:[["app-permissions-route-guard"]],decls:20,vars:7,consts:[[3,"ngModel","ngModelChange","change"],["value","ADMIN"],["value","MANAGER"],["value","GUEST"]],template:function(e,s){1&e&&(c.Vb(0,"page-header"),c.ac(1,"p"),c.Uc(2," The route will be redirected to dashboard after change permission.\n"),c.Zb(),c.ac(3,"mat-button-toggle-group",0),c.ic("ngModelChange",function(e){return s.currentRole=e})("change",function(){return s.onPermissionChange()}),c.ac(4,"mat-button-toggle",1),c.Uc(5,"ADMIN"),c.Zb(),c.ac(6,"mat-button-toggle",2),c.Uc(7,"MANAGER"),c.Zb(),c.ac(8,"mat-button-toggle",3),c.Uc(9,"GUEST"),c.Zb(),c.Zb(),c.ac(10,"p"),c.Uc(11," Your current role: "),c.ac(12,"code"),c.Uc(13),c.nc(14,"json"),c.Zb(),c.Zb(),c.ac(15,"p"),c.Uc(16," Your current permissions: "),c.ac(17,"code"),c.Uc(18),c.nc(19,"json"),c.Zb(),c.Zb()),2&e&&(c.Hb(3),c.vc("ngModel",s.currentRole),c.Hb(10),c.Vc(c.oc(14,3,s.currentRole)),c.Hb(5),c.Vc(c.oc(19,5,s.currentPermissions)))},directives:[m.a,u.b,l.r,l.u,u.a],pipes:[p.i],styles:[""]}),e})();var b=n("6Nlu");function h(e,s){1&e&&(c.ac(0,"p",11),c.Uc(1," I should see it only admin "),c.Zb())}function P(e,s){1&e&&(c.ac(0,"p",11),c.Uc(1," Usage on both only and except I should see it only admin "),c.Zb())}function v(e,s){1&e&&(c.ac(0,"p",12),c.Uc(1,"I will see it only guest"),c.Zb())}function y(e,s){1&e&&(c.ac(0,"p",13),c.Uc(1,"I will see it except adminnnnn"),c.Zb())}function U(e,s){1&e&&(c.ac(0,"p",14),c.Uc(1,"I should see it except admin"),c.Zb())}function x(e,s){1&e&&(c.ac(0,"div"),c.Uc(1," Testing template\n"),c.Zb())}function f(e,s){1&e&&(c.ac(0,"div"),c.Uc(1," Testing template\n"),c.Zb())}function Z(e,s){1&e&&(c.ac(0,"p",15),c.Uc(1,"else block"),c.Zb())}function A(e,s){1&e&&(c.ac(0,"p",16),c.Uc(1,"then block"),c.Zb())}function S(e,s){1&e&&(c.ac(0,"button"),c.Uc(1," This should be visible to admin or superadmin "),c.Zb())}function R(e,s){1&e&&(c.ac(0,"button"),c.Uc(1,"WTF"),c.Zb())}const E=function(){return["admin"]},O=function(){return["guest"]},T=function(){return["adminnnnn"]},w=function(){return[]},M=[{path:"role-switching",component:d},{path:"route-guard",component:g,canActivate:[a.b],data:{permissions:{except:"GUEST",redirectTo:"/dashboard"}}},{path:"test",component:(()=>{class e{constructor(e){this.permissionsSrv=e,this.comparedPermission=["guest"]}ngOnInit(){}getPermissions(){return Object.keys(this.permissionsSrv.getPermissions())}addPermission(){this.permissionsSrv.addPermission("admin",()=>new Promise((e,s)=>{setTimeout(()=>e(!0),2e3)}))}removePermission(){this.permissionsSrv.removePermission("admin")}unAuthorized(){console.log("unAuthorized")}authorized(){console.log("authorizes")}changeToAdmin(){this.comparedPermission=["admin"],console.log(this.comparedPermission)}changeToAnotherPermission(){this.comparedPermission=["awesome"],console.log(this.comparedPermission)}changeToGuest(){this.comparedPermission=["guest"],console.log(this.comparedPermission)}}return e.\u0275fac=function(s){return new(s||e)(c.Ub(a.d))},e.\u0275cmp=c.Ob({type:e,selectors:[["app-permissions-test"]],decls:35,vars:28,consts:[["type","danger"],[3,"click"],["permissions","",3,"ngxPermissionsOnly"],[3,"ngxPermissionsOnly","ngxPermissionsExcept"],["permissions","",3,"ngxPermissionsExcept","permissionsAuthorized","permissionsUnauthorized"],["permissions","",3,"ngxPermissionsExcept"],[4,"ngxPermissionsOnly","ngxPermissionsOnlyElse","ngxPermissionsOnlyThen"],[4,"ngxPermissionsExcept","ngxPermissionsExceptElse","ngxPermissionsExceptThen"],["a",""],["b",""],[4,"ngxPermissionsOnly"],[1,"bg-green-500","text-white"],[1,"bg-purple-500","text-white"],[1,"bg-orange-500","text-white"],[1,"bg-indigo-500","text-white"],[1,"bg-gray-900","text-white"],[1,"bg-gray-300"]],template:function(e,s){if(1&e&&(c.Vb(0,"page-header"),c.ac(1,"mtx-alert",0),c.Uc(2," The permissions check will delay 2s.\n"),c.Zb(),c.ac(3,"p"),c.ac(4,"button",1),c.ic("click",function(){return s.addPermission()}),c.Uc(5,"Add Permission [ admin ]"),c.Zb(),c.ac(6,"button",1),c.ic("click",function(){return s.removePermission()}),c.Uc(7,"Remove Permission [ admin ]"),c.Zb(),c.Zb(),c.Sc(8,h,2,0,"ng-template",2),c.Sc(9,P,2,0,"ng-template",3),c.Sc(10,v,2,0,"ng-template",2),c.Sc(11,y,2,0,"ng-template",4),c.ic("permissionsAuthorized",function(){return s.authorized()})("permissionsUnauthorized",function(){return s.unAuthorized()}),c.Sc(12,U,2,0,"ng-template",5),c.Sc(13,x,2,0,"div",6),c.Sc(14,f,2,0,"div",7),c.Sc(15,Z,2,0,"ng-template",null,8,c.Tc),c.Sc(17,A,2,0,"ng-template",null,9,c.Tc),c.ac(19,"p"),c.Uc(20),c.nc(21,"json"),c.Zb(),c.ac(22,"div"),c.ac(23,"button",1),c.ic("click",function(){return s.changeToAdmin()}),c.Uc(24,"Change To Admin Permission"),c.Zb(),c.ac(25,"button",1),c.ic("click",function(){return s.changeToAnotherPermission()}),c.Uc(26,"Change To Awesome Permission"),c.Zb(),c.ac(27,"button",1),c.ic("click",function(){return s.changeToGuest()}),c.Uc(28,"Change To Guest Permission"),c.Zb(),c.Zb(),c.ac(29,"div"),c.Sc(30,S,2,0,"button",10),c.Sc(31,R,2,0,"button",10),c.Zb(),c.ac(32,"p"),c.Uc(33),c.nc(34,"json"),c.Zb()),2&e){const e=c.Gc(16),n=c.Gc(18);c.Hb(8),c.vc("ngxPermissionsOnly",c.yc(20,E)),c.Hb(1),c.vc("ngxPermissionsOnly",c.yc(21,E))("ngxPermissionsExcept","hhhhh"),c.Hb(1),c.vc("ngxPermissionsOnly",c.yc(22,O)),c.Hb(1),c.vc("ngxPermissionsExcept",c.yc(23,T)),c.Hb(1),c.vc("ngxPermissionsExcept",c.yc(24,E)),c.Hb(1),c.vc("ngxPermissionsOnly",c.yc(25,E))("ngxPermissionsOnlyElse",e)("ngxPermissionsOnlyThen",n),c.Hb(1),c.vc("ngxPermissionsExcept",c.yc(26,E))("ngxPermissionsExceptElse",e)("ngxPermissionsExceptThen",n),c.Hb(6),c.Wc(" Compared permission ",c.oc(21,16,s.comparedPermission),"\n"),c.Hb(10),c.vc("ngxPermissionsOnly",s.comparedPermission),c.Hb(1),c.vc("ngxPermissionsOnly",c.yc(27,w)),c.Hb(2),c.Vc(c.oc(34,18,s.getPermissions()))}},directives:[m.a,b.a,a.a],pipes:[p.i],styles:[""]}),e})(),canActivate:[a.b],data:{permissions:{only:"ADMIN",redirectTo:"/dashboard"}}}];let G=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=c.Sb({type:e}),e.\u0275inj=c.Rb({imports:[[t.i.forChild(M)],t.i]}),e})(),k=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=c.Sb({type:e}),e.\u0275inj=c.Rb({imports:[[i.a,G]]}),e})()}}]);